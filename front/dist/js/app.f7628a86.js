(function(){"use strict";var e={961:function(e,o,t){var l=t(963),n=t(252);function s(e,o,t,l,s,i){const a=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(a)}var i={name:"App"},a=t(744);const u=(0,a.Z)(i,[["render",s]]);var d=u,r=t(201),m=t(577);const c=(0,n._)("h1",null,"Les Modules",-1),p=(0,n._)("p",null,"Chaque module de cours a son ID propre",-1);function b(e,o,t,l,s,i){return(0,n.wg)(),(0,n.iD)("div",null,[c,p,(0,n._)("p",null,[(0,n.Uk)("Pour y accéder, il faut se rendre sur: "),(0,n._)("u",null,(0,m.zw)(i.getUrl())+"modules/:IdDuModule",1)])])}var _={name:"HomeView",methods:{getUrl(){return window.location.href}}};const h=(0,a.Z)(_,[["render",b]]);var f=h;const g={key:0,class:"module"},v={class:"title"},C={class:"time"},y={id:"container"},k={class:"buttons"},w=(0,n._)("label",{for:"objectif_general"},"Objectif Général :",-1),S=["disabled"],q=(0,n._)("label",{for:"objectifs_pedagogiques"},"Contenu :",-1),j=["disabled"],U=(0,n._)("label",{for:"pre_requis"},"Pré-requis :",-1),M=["disabled"],V=(0,n._)("label",{for:"bibliographie"},"Bibliographie :",-1),P=["disabled"],T=(0,n._)("label",{for:"competences_visees"},"Compétences Visées :",-1),D=["disabled"],O=(0,n._)("label",{for:"methodes_pedagogiques"},"Méthodes Pédagogiques :",-1),x={class:"checkboxes"},A=["disabled"],E=["disabled"],N=["disabled"],I=["disabled"],$=["disabled"],F=["disabled"],z={key:0},B=(0,n._)("label",{for:"autre"},"Autre :",-1),L=["disabled"],G={class:"seances"},Z=["disabled"],H={class:"num_seance"},K=(0,n._)("label",{for:"num_seance"},"Numéro de la séance :",-1),R=["onUpdate:modelValue","disabled"],J={class:"duration_seance"},Q=(0,n._)("label",{for:"duration_seance"},"Durée de la séance :",-1),Y=["onUpdate:modelValue","disabled"],W={class:"personal_work"},X=(0,n._)("label",{for:"personal_work"},"Travail personnel :",-1),ee=["onUpdate:modelValue","disabled"],oe={class:"themes"},te=(0,n._)("label",{for:"themes"},"Thèmes",-1),le=["onUpdate:modelValue","disabled"],ne={class:"actions"},se=(0,n._)("label",{for:"actions"},"Actions: ",-1),ie=["onUpdate:modelValue","disabled"],ae=["onClick","disabled"],ue=["disabled"],de={class:"send_buttons"},re=["disabled"],me=["disabled"],ce=["disabled"],pe={key:3,value:"Soumis",class:"btn completed"};function be(e,o,t,s,i,a){return i.loaded?((0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("div",v,[(0,n._)("h1",null,(0,m.zw)(i.module.Name),1),(0,n._)("span",null,(0,m.zw)(i.module.UE.Label),1),(0,n._)("div",C,[(0,n._)("p",null,(0,m.zw)(i.module.__Nb_jour_5h_ou_7h)+" jours",1),(0,n.Uk)(" | "),(0,n._)("p",null,(0,m.zw)(i.module.__Heures_TD)+" h",1)])]),(0,n._)("div",y,[(0,n._)("div",k,[(0,n._)("button",{type:"button",onClick:o[0]||(o[0]=e=>a.changeMenuStatus("obj_gen")),class:(0,m.C_)({active:"obj_gen"==i.menu_status})}," Objectif Général ",2),(0,n._)("button",{type:"button",onClick:o[1]||(o[1]=e=>a.changeMenuStatus("obj_peda")),class:(0,m.C_)({active:"obj_peda"==i.menu_status})}," Contenu ",2),(0,n._)("button",{type:"button",onClick:o[2]||(o[2]=e=>a.changeMenuStatus("requis")),class:(0,m.C_)({active:"requis"==i.menu_status})}," Pré-requis ",2),(0,n._)("button",{type:"button",onClick:o[3]||(o[3]=e=>a.changeMenuStatus("biblio")),class:(0,m.C_)({active:"biblio"==i.menu_status})}," Bibliographie ",2),(0,n._)("button",{type:"button",onClick:o[4]||(o[4]=e=>a.changeMenuStatus("competences")),class:(0,m.C_)({active:"competences"==i.menu_status})}," Compétences Visées ",2),(0,n._)("button",{type:"button",onClick:o[5]||(o[5]=e=>a.changeMenuStatus("method")),class:(0,m.C_)({active:"method"==i.menu_status})}," Méthodes Pédagogiques ",2),(0,n._)("button",{type:"button",onClick:o[6]||(o[6]=e=>a.changeMenuStatus("seance")),class:(0,m.C_)({active:"seance"==i.menu_status})}," Déroulement du module ",2)]),(0,n._)("form",{onSubmit:o[39]||(o[39]=(0,l.iM)((e=>a.sendForm()),["prevent"]))},[(0,n.wy)((0,n._)("div",null,[w,(0,n.wy)((0,n._)("textarea",{onInput:o[7]||(o[7]=e=>a.emitSocket()),id:"objectif_general","onUpdate:modelValue":o[8]||(o[8]=e=>i.form.objectif_general=e),disabled:"Complete"==i.module.Complete},null,40,S),[[l.nr,i.form.objectif_general]])],512),[[l.F8,"obj_gen"==i.menu_status]]),(0,n.wy)((0,n._)("div",null,[q,(0,n.wy)((0,n._)("textarea",{onInput:o[9]||(o[9]=e=>a.emitSocket()),id:"objectifs_pedagogiques","onUpdate:modelValue":o[10]||(o[10]=e=>i.form.objectifs_pedagogiques=e),disabled:"Complete"==i.module.Complete},null,40,j),[[l.nr,i.form.objectifs_pedagogiques]])],512),[[l.F8,"obj_peda"==i.menu_status]]),(0,n.wy)((0,n._)("div",null,[U,(0,n.wy)((0,n._)("textarea",{onInput:o[11]||(o[11]=e=>a.emitSocket()),id:"pre_requis","onUpdate:modelValue":o[12]||(o[12]=e=>i.form.pre_requis=e),disabled:"Complete"==i.module.Complete},null,40,M),[[l.nr,i.form.pre_requis]])],512),[[l.F8,"requis"==i.menu_status]]),(0,n.wy)((0,n._)("div",null,[V,(0,n.wy)((0,n._)("textarea",{onInput:o[13]||(o[13]=e=>a.emitSocket()),id:"bibliographie","onUpdate:modelValue":o[14]||(o[14]=e=>i.form.bibliographie=e),disabled:"Complete"==i.module.Complete},null,40,P),[[l.nr,i.form.bibliographie]])],512),[[l.F8,"biblio"==i.menu_status]]),(0,n.wy)((0,n._)("div",null,[T,(0,n.wy)((0,n._)("textarea",{onInput:o[15]||(o[15]=e=>a.emitSocket()),id:"competences_visees","onUpdate:modelValue":o[16]||(o[16]=e=>i.form.competences_visees=e),disabled:"Complete"==i.module.Complete},null,40,D),[[l.nr,i.form.competences_visees]])],512),[[l.F8,"competences"==i.menu_status]]),(0,n.wy)((0,n._)("div",null,[O,(0,n._)("div",x,[(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",value:"Enseignement en face à face","onUpdate:modelValue":o[17]||(o[17]=e=>i.form.methodes_pedagogiques=e),disabled:"Complete"==i.module.Complete,onChange:o[18]||(o[18]=e=>a.emitSocket())},null,40,A),[[l.e8,i.form.methodes_pedagogiques]]),(0,n.Uk)(" Enseignement en face à face ")]),(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",value:"Pédagogie par projets","onUpdate:modelValue":o[19]||(o[19]=e=>i.form.methodes_pedagogiques=e),disabled:"Complete"==i.module.Complete,onChange:o[20]||(o[20]=e=>a.emitSocket())},null,40,E),[[l.e8,i.form.methodes_pedagogiques]]),(0,n.Uk)(" Pédagogie par projets ")]),(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",value:"Pédagogie inversée","onUpdate:modelValue":o[21]||(o[21]=e=>i.form.methodes_pedagogiques=e),disabled:"Complete"==i.module.Complete,onChange:o[22]||(o[22]=e=>a.emitSocket())},null,40,N),[[l.e8,i.form.methodes_pedagogiques]]),(0,n.Uk)(" Pédagogie inversée ")]),(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",value:"Blended Learning","onUpdate:modelValue":o[23]||(o[23]=e=>i.form.methodes_pedagogiques=e),disabled:"Complete"==i.module.Complete,onChange:o[24]||(o[24]=e=>a.emitSocket())},null,40,I),[[l.e8,i.form.methodes_pedagogiques]]),(0,n.Uk)(" Blended Learning ")]),(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",value:"100% en ligne","onUpdate:modelValue":o[25]||(o[25]=e=>i.form.methodes_pedagogiques=e),disabled:"Complete"==i.module.Complete,onChange:o[26]||(o[26]=e=>a.emitSocket())},null,40,$),[[l.e8,i.form.methodes_pedagogiques]]),(0,n.Uk)(" 100% en ligne ")]),(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",value:"Autre","onUpdate:modelValue":o[27]||(o[27]=e=>i.form.methodes_pedagogiques=e),disabled:"Complete"==i.module.Complete,onChange:o[28]||(o[28]=e=>a.emitSocket())},null,40,F),[[l.e8,i.form.methodes_pedagogiques]]),(0,n.Uk)(" Autre ")])]),i.form.methodes_pedagogiques?.includes("Autre")?((0,n.wg)(),(0,n.iD)("div",z,[B,(0,n.wy)((0,n._)("textarea",{onInput:o[29]||(o[29]=e=>a.emitSocket()),id:"autre","onUpdate:modelValue":o[30]||(o[30]=e=>i.form.autre=e),disabled:"Complete"==i.module.Complete},null,40,L),[[l.nr,i.form.autre]])])):(0,n.kq)("",!0)],512),[[l.F8,"method"==i.menu_status]]),(0,n.wy)((0,n._)("div",G,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.form.seances,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"seance",disabled:"Complete"==i.module.Complete,onInput:o[36]||(o[36]=e=>a.emitSocket())},[(0,n._)("div",H,[K,(0,n.wy)((0,n._)("input",{onInput:o[31]||(o[31]=e=>a.emitSocket()),type:"number",id:"num_seance","onUpdate:modelValue":o=>e.NumeroSeance=o,disabled:"Complete"==i.module.Complete},null,40,R),[[l.nr,e.NumeroSeance]])]),(0,n._)("div",J,[Q,(0,n.wy)((0,n._)("input",{onInput:o[32]||(o[32]=e=>a.emitSocket()),type:"time",id:"duration_seance","onUpdate:modelValue":o=>e.Durée=o,disabled:"Complete"==i.module.Complete},null,40,Y),[[l.nr,e.Durée]])]),(0,n._)("div",W,[X,(0,n.wy)((0,n._)("input",{onInput:o[33]||(o[33]=e=>a.emitSocket()),type:"text",id:"personal_work","onUpdate:modelValue":o=>e.TravailPersonnel=o,disabled:"Complete"==i.module.Complete},null,40,ee),[[l.nr,e.TravailPersonnel]])]),(0,n._)("div",oe,[te,(0,n.wy)((0,n._)("input",{onInput:o[34]||(o[34]=e=>a.emitSocket()),id:"themes","onUpdate:modelValue":o=>e.Thèmes=o,disabled:"Complete"==i.module.Complete},null,40,le),[[l.nr,e.Thèmes]])]),(0,n._)("div",ne,[se,(0,n.wy)((0,n._)("input",{onInput:o[35]||(o[35]=e=>a.emitSocket()),id:"actions","onUpdate:modelValue":o=>e.Actions=o,disabled:"Complete"==i.module.Complete},null,40,ie),[[l.nr,e.Actions]])]),(0,n._)("button",{type:"button",onClick:o=>(a.deleteSeance(e.id),a.emitSocket()),class:"delete_seance",disabled:"Complete"==i.module.Complete}," Retirer la séance - ",8,ae)],40,Z)))),128)),(0,n._)("button",{type:"button",onClick:o[37]||(o[37]=e=>(a.addSeance(),a.emitSocket())),class:"add_seance",disabled:"Complete"==i.module.Complete}," Nouvelle Seance + ",8,ue)],512),[[l.F8,"seance"==i.menu_status]]),(0,n._)("div",de,[i.submit&&"Complete"!=!i.module.Complete?((0,n.wg)(),(0,n.iD)("input",{key:1,value:"Enregistré",class:"btn submit",disabled:"Complete"==i.module.Complete},null,8,me)):((0,n.wg)(),(0,n.iD)("input",{key:0,type:"submit",value:"Enregistrer",class:"btn notsubmit",disabled:"Complete"==i.module.Complete},null,8,re)),"Complete"!=i.module.Complete?((0,n.wg)(),(0,n.iD)("input",{key:2,type:"button",onClick:o[38]||(o[38]=e=>a.completeModule()),value:"Soumettre le syllabus",class:"btn notcomplete",disabled:"Complete"==i.module.Complete},null,8,ce)):((0,n.wg)(),(0,n.iD)("input",pe))])],32)])])):(0,n.kq)("",!0)}var _e={name:"ModuleView",data(){return{menu_status:"obj_gen",form:{methodes_pedagogiques:[],seances:[]},module:null,loaded:!1,submit:!1}},methods:{sendForm(e){this.$airtable("Module").update([{id:this.module.module_id,fields:{"Objectifs Pedagogiques":this.form.objectifs_pedagogiques,"Objectif General":this.form.objectif_general,"Pre-requis":this.form.pre_requis,Bibliographie:this.form.bibliographie,"Competences Visees":this.form.competences_visees,"Methodes Pedagogiques":this.form.methodes_pedagogiques,"Autre Methode Pedagogique":this.form.methodes_pedagogiques?.includes("Autre")?this.form.autre:null}}]),this.module.seances&&this.module.seances.forEach((e=>{this.form.seances.some((o=>o.id==e.id))||(this.$airtable("Seances").destroy([e.id]),this.module.seances=this.module.seances.filter((o=>o.id!=e.id)))})),this.form.seances.forEach((e=>{e.New?this.$airtable("Seances").create([{fields:{NumeroSeance:e.NumeroSeance,"Durée":e.Durée,TravailPersonnel:e.TravailPersonnel,"Thèmes":e.Thèmes,Actions:e.Actions,Module:[this.module.module_id]}}]):this.$airtable("Seances").update([{id:e.id,fields:{NumeroSeance:e.NumeroSeance,"Durée":e.Durée,TravailPersonnel:e.TravailPersonnel,"Thèmes":e.Thèmes,Actions:e.Actions}}])})),this.submit=!0,"completed"==e&&(this.$airtable("Module").update([{id:this.module.module_id,fields:{Complete:"Complete"}}]),this.module.Complete="Complete")},emitSocket(){this.submit=!1,this.$socket.emit("obj",this.form)},changeMenuStatus(e){this.menu_status=e},addSeance(){this.form.seances.push({id:Math.random().toString(36).substring(7),NumeroSeance:this.form.seances.length+1,"Durée":"",TravailPersonnel:"","Thèmes":"",Actions:"",New:!0})},deleteSeance(e){console.log(e),this.form.seances=this.form.seances.filter((o=>o.id!=e))},completeModule(){confirm("Êtes-vous sûr de vouloir valider ce module ?")&&this.sendForm("completed")}},async created(){this.$airtable("Module").find(this.$route.params.id,((e,o)=>{if(e)return void console.error(e);for(var t in this.module=o.fields,this.module)this.module[t.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()]=this.module[t];Object.keys(this.module).forEach((e=>{this.form[e]=this.module[e]})),this.$airtable("Unité d'Enseignement").find(this.module.UE,((e,o)=>{e?console.error(e):this.module.UE=o.fields}));let l=this.module.seances??[];l.forEach((e=>{this.$airtable("Seances").find(e,((o,t)=>{o?console.error(o):t&&t.fields&&(t.fields.id=t.id,this.module.seances.push(t.fields),this.module.seances.splice(this.module.seances.indexOf(e),1))}))})),setTimeout((()=>{this.module.seances?.sort(((e,o)=>e.NumeroSeance-o.NumeroSeance)),this.loaded=!0}),2e3),this.$socket.on("data",(e=>{Object.keys(e).forEach((o=>{this.form[o]=e[o]}))}))}))}};const he=(0,a.Z)(_e,[["render",be]]);var fe=he;const ge=[{path:"/",name:"home",component:f},{path:"/modules/:id",name:"module",component:fe}],ve=(0,r.p7)({history:(0,r.r5)(),routes:ge});var Ce=ve,ye=t(829),ke=t.n(ye),we=t(367);document.title="Fiche Module";const Se=(0,l.ri)(d);Se.use(Ce),Se.config.globalProperties.$socket=(0,we.io)("https://merlin.digital-wizards.ovh/",{path:"/socket.io",autoConnect:!1}),Se.config.globalProperties.$airtable=new(ke())({apiKey:"keyG9cMbOsV37a11E"}).base("appiziQJEnzsRuszt"),Se.mount("#app")}},o={};function t(l){var n=o[l];if(void 0!==n)return n.exports;var s=o[l]={exports:{}};return e[l](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(o,l,n,s){if(!l){var i=1/0;for(r=0;r<e.length;r++){l=e[r][0],n=e[r][1],s=e[r][2];for(var a=!0,u=0;u<l.length;u++)(!1&s||i>=s)&&Object.keys(t.O).every((function(e){return t.O[e](l[u])}))?l.splice(u--,1):(a=!1,s<i&&(i=s));if(a){e.splice(r--,1);var d=n();void 0!==d&&(o=d)}}return o}s=s||0;for(var r=e.length;r>0&&e[r-1][2]>s;r--)e[r]=e[r-1];e[r]=[l,n,s]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var l in o)t.o(o,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:o[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,l){var n,s,i=l[0],a=l[1],u=l[2],d=0;if(i.some((function(o){return 0!==e[o]}))){for(n in a)t.o(a,n)&&(t.m[n]=a[n]);if(u)var r=u(t)}for(o&&o(l);d<i.length;d++)s=i[d],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(r)},l=self["webpackChunkmodule_airtable"]=self["webpackChunkmodule_airtable"]||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(961)}));l=t.O(l)})();
//# sourceMappingURL=app.f7628a86.js.map